<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schichtplan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --primary-text: #12162E;
            --button-red: #B73243;
            --button-red-hover: #9a2a38;
            --bg-main: #f4f7f9;
            --card-bg: #ffffff;
            --tile-bg: #f0f3ff; 
            --tile-border: #e2e8f0;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--bg-main);
            color: var(--primary-text);
            -webkit-font-smoothing: antialiased;
        }

        /* Sixt-Style Card */
        .sixt-card {
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(18, 22, 46, 0.05);
        }

        /* Shift Tile Styles */
        .shift-tile {
            width: 100%;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-weight: 900;
            font-size: 1.25rem;
            transition: all 0.2s ease;
            border: 2px solid var(--tile-border);
            background-color: var(--tile-bg);
            color: var(--primary-text);
        }

        @media (min-width: 768px) {
            .shift-tile {
                height: 80px;
                font-size: 1.5rem;
            }
        }

        .tile-F, .tile-S, .tile-N, .tile-X {
            background-color: var(--tile-bg);
            color: var(--primary-text);
            border-color: var(--tile-border);
        }

        .tile-X {
            opacity: 0.8;
        }

        .is-today-marker {
            position: relative;
        }
        
        .is-today-marker::before {
            content: 'HEUTE';
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 9px;
            font-weight: 900;
            color: var(--button-red);
            letter-spacing: 1px;
        }

        /* View Switcher Button */
        .btn-toggle {
            padding: 8px 24px;
            font-weight: 700;
            font-size: 14px;
            border-radius: 8px;
            transition: all 0.2s;
        }

        .btn-toggle.active {
            background-color: var(--button-red);
            color: white;
            box-shadow: 0 4px 12px rgba(183, 50, 67, 0.3);
        }

        .btn-toggle:not(.active) {
            color: #94a3b8;
        }

        @media print {
            .no-print { display: none !important; }
        }
    </style>
</head>
<body class="p-4 md:p-10">

    <div id="app" class="max-w-5xl mx-auto space-y-8">
        
        <!-- Status & Navigation Top Area -->
        <div class="flex flex-col md:flex-row gap-6 items-stretch md:items-center justify-between">
            <div class="sixt-card p-5 flex-1 sidebar-accent border-l-4 border-[#B73243]">
                <span class="text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-1">Nächster Einsatz</span>
                <div class="flex items-baseline gap-3">
                    <span id="next-shift-label" class="text-2xl font-black text-[#12162E]">FRÜHSCHICHT</span>
                    <span class="text-sm font-bold bg-slate-100 px-3 py-1 rounded-full text-slate-500">Morgen, 06:00</span>
                </div>
            </div>

            <div class="sixt-card p-2 flex no-print">
                <button onclick="setView('week')" id="btn-week" class="btn-toggle active">WOCHE</button>
                <button onclick="setView('month')" id="btn-month" class="btn-toggle">MONAT</button>
            </div>
        </div>

        <!-- Period Selector -->
        <div class="flex items-center justify-between px-2">
            <button onclick="navigate(-1)" class="p-3 hover:bg-white rounded-full transition-colors text-slate-400">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
            </button>
            <h2 id="current-label" class="text-lg md:text-xl font-black tracking-tighter text-[#12162E] uppercase text-center">Lade Zeitraum...</h2>
            <button onclick="navigate(1)" class="p-3 hover:bg-white rounded-full transition-colors text-slate-400">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="3" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
            </button>
        </div>

        <!-- Main Schedule Area -->
        <div id="schedule-container" class="sixt-card overflow-hidden">
            <!-- Content via JS -->
        </div>

        <!-- Footer -->
        <footer class="text-center py-8">
            <div class="h-px bg-slate-200 w-12 mx-auto mb-4 opacity-50"></div>
            <p class="text-[10px] font-black text-slate-300 uppercase tracking-[0.2em]">&copy; 2026 Interne Planung</p>
        </footer>
    </div>

    <script>
        const shiftTypes = {
            'F': { label: 'FRÜH', name: 'FRÜHSCHICHT', time: '06:00 - 14:00' },
            'S': { label: 'SPÄT', name: 'SPÄTSCHICHT', time: '14:00 - 22:00' },
            'N': { label: 'NACHT', name: 'NACHTSCHICHT', time: '22:00 - 06:00' },
            'X': { label: 'FREI', name: 'FREI', time: '-' }
        };

        let viewType = 'week';
        let displayDate = new Date();
        const mockUserId = 101;

        function init() {
            render();
        }

        function setView(type) {
            viewType = type;
            document.getElementById('btn-week').classList.toggle('active', type === 'week');
            document.getElementById('btn-month').classList.toggle('active', type === 'month');
            render();
        }

        function navigate(dir) {
            if (viewType === 'week') {
                displayDate.setDate(displayDate.getDate() + (dir * 7));
            } else {
                displayDate.setMonth(displayDate.getMonth() + dir);
            }
            render();
        }

        function generateShift(date) {
            const d = date.getDate() + date.getMonth() * 31 + date.getFullYear();
            const codes = ['F', 'S', 'N', 'X'];
            return codes[(mockUserId * 17 + d) % 4];
        }

        function render() {
            const container = document.getElementById('schedule-container');
            const label = document.getElementById('current-label');

            if (viewType === 'week') {
                renderWeek(container, label);
            } else {
                renderMonth(container, label);
            }
        }

        function renderWeek(container, label) {
            const start = new Date(displayDate);
            const day = start.getDay() || 7;
            start.setDate(start.getDate() - (day - 1));
            
            const end = new Date(start);
            end.setDate(start.getDate() + 6);
            label.innerText = `${start.toLocaleDateString('de-DE', { day: '2-digit', month: 'short' })} - ${end.toLocaleDateString('de-DE', { day: '2-digit', month: 'short', year: 'numeric' })}`;

            let html = `<div class="grid grid-cols-1 md:grid-cols-7 divide-y md:divide-y-0 md:divide-x divide-slate-100">`;
            for (let i = 0; i < 7; i++) {
                const date = new Date(start);
                date.setDate(start.getDate() + i);
                const isToday = date.toDateString() === new Date().toDateString();
                const code = generateShift(date);
                const shift = shiftTypes[code];

                html += `
                    <div class="p-6 md:p-4 flex md:flex-col items-center justify-between md:justify-start gap-4 ${isToday ? 'bg-slate-50' : ''}">
                        <!-- Date Info -->
                        <div class="flex flex-col items-center md:mb-6 ${isToday ? 'is-today-marker' : ''}">
                            <span class="text-[10px] font-black text-slate-300 uppercase tracking-widest">${date.toLocaleDateString('de-DE', { weekday: 'short' })}</span>
                            <span class="text-2xl font-black text-[#12162E]">${date.getDate()}</span>
                        </div>
                        
                        <!-- Tile -->
                        <div class="flex-1 md:w-full flex flex-col items-center md:items-stretch px-4 md:px-0">
                            <div class="shift-tile tile-${code} shadow-sm mb-2">
                                ${code}
                            </div>
                            <div class="hidden md:block text-center">
                                <div class="text-[10px] font-black text-[#12162E] uppercase">${shift.name}</div>
                                <div class="text-[8px] font-bold text-slate-400 uppercase tracking-tighter">${shift.time}</div>
                            </div>
                        </div>

                        <!-- Mobile Only Detail -->
                        <div class="md:hidden text-right min-w-[120px]">
                            <div class="text-sm font-black text-[#12162E] uppercase leading-tight">${shift.name}</div>
                            <div class="text-xs font-bold text-slate-400 mt-0.5">${shift.time}</div>
                        </div>
                    </div>
                `;
            }
            html += `</div>`;
            container.innerHTML = html;
        }

        function renderMonth(container, label) {
            const year = displayDate.getFullYear();
            const month = displayDate.getMonth();
            label.innerText = displayDate.toLocaleDateString('de-DE', { month: 'long', year: 'numeric' });

            const first = new Date(year, month, 1);
            const startDay = first.getDay() || 7;
            const daysInMonth = new Date(year, month + 1, 0).getDate();

            let html = `<div class="grid grid-cols-7 gap-px bg-slate-100">`;
            ['Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa', 'So'].forEach(d => {
                html += `<div class="bg-slate-50 p-2 text-center text-[9px] font-black text-slate-300 uppercase">${d}</div>`;
            });

            for (let i = 1; i < startDay; i++) {
                html += `<div class="bg-white/50 p-2 min-h-[80px]"></div>`;
            }

            for (let d = 1; d <= daysInMonth; d++) {
                const date = new Date(year, month, d);
                const isToday = date.toDateString() === new Date().toDateString();
                const code = generateShift(date);
                html += `
                    <div class="bg-white p-2 min-h-[80px] flex flex-col items-end transition-colors hover:bg-slate-50 cursor-default">
                        <span class="text-[10px] font-black ${isToday ? 'text-[#B73243]' : 'text-slate-300'}">${d}</span>
                        <div class="mt-auto w-full">
                            <div class="w-full h-8 rounded-md flex items-center justify-center font-black text-[12px] tile-${code}">
                                ${code}
                            </div>
                        </div>
                    </div>
                `;
            }
            html += `</div>`;
            container.innerHTML = html;
        }

        init();
    </script>
</body>
</html>
